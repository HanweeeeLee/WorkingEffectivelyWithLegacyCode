# 01. 소프트웨어 변경
## 소프트웨어 코드를 변경하는 네 가지 이유
1. 새로운 기능의 추가
2. 버그 수정
3. 설계 개선
4. 자원 이용의 최적화

## 기능 추가와 버그 수정
회사에서 운영중인 서비스의 "로고를 우측으로 옮기고 애니메이션을 넣어주세요"라는 요구사항은 버그 수정일까? 아니면 기능추가일까?  
관점에 따라 다름. 고객 관점에선 문제를 수정하기 위함. 개발자 관점에서 보면 완전히 새로운 기능을 추가하는 작업  
이런 구분은 그저 주관적이다~  
어쨋든 어느경우던간에 소프트웨어 코드 및 그 밖의 산출물을 변경해야 한다.  
**동작 변경(hehavioral change)이 있는지 여부가 중요하다.** 새로운 동작을 추가하는 것과 기존의 동작을 변경하는 것 간에는 커다란 차이가 있다.  

(새로운동작 추가-화면 오른편 로고 표시, 동작제거-화면 왼편 로고 제거) <- 이 경우는 동작을 변경하는것일까, 추가하는것일까, 아니면 둘 다 일까?  
프로그래머 관점에서는 기존 코드를 변경해야 한다면 동작 변경으로 간주하고, 새로운 코드를 추가하고 이를 호출할 뿐이라면 동작 추가로 간주한다.  
```Java
public class CDPlayer {
	public void addTrackListing(Track track) {
		... 
	}
	...
}
```
-> 노래 목록을 교체하는 메서드를 추가해보자.  
```Java
public class CDPlayer {
	public void addTrackListing(Track track) {
		... 
	}
	public void replaceTrackListing(String name, Track track) {
		...
	}
	...
}
```
> 메서드를 추가하기만 함. 이 경우엔 추가. 하지만 이 코드를 적용시키면 바깥메서드의 동작이 변경됨 ㅎㅎ;  

## 설계 개선
많은 사람들은 버그가 생길까봐 설계개선을 하지 않으려함. 동작 변경 없이 설계를 개선하는 행위를 리팩토링이라고 하는데, 이렇게 변경해야함  
리팩토링은 반드시 테스트루틴을 작성하고 검증하는 방식으로 소프트웨어의 유지보수성을 개선할 수 있다.  
변경 관점에서 리팩토링을 할 때 가장 중요한 것은 리팩토링 전후에 기능상의 변경이 없어야 한다는 것이다.  

## 최적화
리팩토링과 최적화는 소프트웨어를 변경하면서 기존의 기능은 모두 동일하게 유지하며 '다른 무언가'를 변경한다는 공통점을 가진다.  
### 다른 무언가
 - 리팩토링: 프로그램 구조
 - 최적화: 성능

## 네 가지 이유의 종합
 | - | 기능 추가 | 버그 수정 | 리팩토링 | 최적화 |  
 |:---:|:---:|:---:|:---:|:---:|
 | 구조 | 변경 | 변경 | 변경 | - |
 | 기능 | 변경 | 변경 | - | - |
 | 자원 사용량 | - | - | - | 변경 |
 | 새로운 기능 | 변경 | - | - | - |
  
기능 추가와 버그 수정의 관계는 리팩토링과 최적화의 관계와 매우 비슷하다.  
네 가지 경우 모두 일부 기능과 동작에 변경이 일어나지만 그대로 유지되는 부분이 더 큰 비중을 차지한다.  
  
소프트웨어를 변경할떄 무슨 일이 일어나는지 정리해보았는데, 소프트웨어를 변경할 때 무엇에 집중해야 하는지를 알 수 있었다.  

변경 대상 코드에만 집중하면 안되고 어떻게 기존의 동작에 영향을 미치지 않고 유지할 수 있을지 고민해야 한다.  
코드를 변경하냐 안하냐의 문제도 있지만 동작 자체가 변하냐 변하지 않느냐를 체크하는게 더 어렵고, 해야함.  
위에서의 정리가 그 체크를 이해하는것에 기본이 된다.  

## 위험한 변경
기존 동작을 그대로 유지하는 것은 쉽지 않다.  
코드를 변경하면서 기존동작이 변경되는 위험을 최소화하기 위해서는 다음 세 가지 질문을 해야한다.
1. 어떤 변경을 해야 하는가?
2. 변경이 정확하게 이뤄졌는지 어떻게 확인할 수 있는가?
3. 무언가를 손상시키지 않았는지 어떻게 확인할 수 있는가?
  
기존코드를 수정하지 않고 계속 append하는 형식이 안전할까? 아님. 결국 이해하기 너어무 어려워진다.  
좋은 시스템일 경우 시스템에 익숙해질수록 마음이 편안해지고 변경 작업에 확신을 갖게 되지만, 나쁜 시스템의 경우 시스템을 알게 될수록 코드 변경 작업이 마치 호랑이를 피하기 위해 절벽에서 뛰어내리는 것 같은 느낌을 받게 된다.  
  
또, 변경을 회피하기만하면 개발자의 실력도 녹슨다. 반면 꾸준히 수행하면 습관이되며 실력이 늘어난다.  
  
마지막으로, 변경 회피는 두려움을 갖게 한다. 
































